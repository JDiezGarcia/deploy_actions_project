pipeline {
    agent any
    parameters {
        string(name: 'executor', description: 'What is your name?', defaultValue: 'System' )
        string(name: 'subject', description: 'Why are you executing the pipeline?', defaultValue: 'We detected a change in the repository')
        string(name: 'email', description: 'Put your email to recieve a notificiation with the results', defaultValue: 'fco.javier.diez.garcia@gmail.com')
    }
    stages {
        stage('Lint') {
            steps {
                script {
                    sh "npm install"
                    env.lintResult = sh(script: "npm run lint", returnStatus: true)
                }
            }
        }
        stage('Results'){
            steps {
                script{
                    sh "echo ${params.executor}"
                    sh "echo ${params.subject}"
                    sh "echo ${params.email}"
                    sh "echo ${env.lintResult}"               
                }
            }
        }
    }
}